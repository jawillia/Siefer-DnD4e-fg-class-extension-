<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>	
	<windowclass name="charsheet_main" merge="join">
		<script>
			function onDrop(x, y, draginfo)
				if super and super.onDrop then
					super.onDrop(x, y, draginfo);
				end

				if draginfo.isType("shortcut") then
					local sClass, sRecord = draginfo.getShortcutData();
					if StringManager.startsWith(sRecord, "reference.classes") or StringManager.startsWith(sRecord, "class.id-") then
						return CharClassBuildDropManager.addInfoDB(getDatabaseNode(), sClass, sRecord);
					end
				end
			end
		</script>
		<sheetdata>	
			<genericcontrol name="classleftanchor">
				<anchored to="classframe" position="insidetopleft" offset="-10,5" />
				<disabled />
			</genericcontrol>
			<genericcontrol name="classrightanchor">
				<anchored to="classframe" position="insidetopleft" offset="143,4" />
				<disabled />
			</genericcontrol>
			<linkfield_record name="hybridclasslink">
				<anchored to="classleftanchor" width="20" height="20">
					<top />
					<left relation="relative" offset="2" postoffset="2" />
				</anchored>
				<description field="hybridclass" />
				<hideonempty />
				<nodrag />
				<script>
					function onClickDown()
						return true;
					end
					function onClickRelease()
						return CharManagerWith4EClassExtension.onHybridClassLinkPressed(window.getDatabaseNode());
					end
				</script>
			</linkfield_record>			
			<linkfield_record name="classlink">
				<anchored to="classrightanchor" width="20" height="20">
					<top />
					<left relation="relative" offset="2" postoffset="2" />
				</anchored>
				<description field="class" />
				<hideonempty />
				<nodrag />
				<script>
					function onClickDown()
						return true;
					end
					function onClickRelease()
						return CharManagerWith4EClassExtension.onClassLinkPressed(window.getDatabaseNode());
					end
				</script>
			</linkfield_record>
<!-- 			<linkfield_statich name="classlink">
				<anchored to="classframe" position="insidetopleft" offset="143,4" width="20" height="20" />
				<description field="class" />
				<script>
					function onClickDown()
						return true;
					end
					function onClickRelease()
						return CharManagerWith4EClassExtension.onClassLinkPressed(window.getDatabaseNode());
					end
				</script>
			</linkfield_statich> -->	
		</sheetdata>
	</windowclass>
</root>